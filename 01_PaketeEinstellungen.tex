% Autor: Simon May
% Datum: 2014-08-19

% --- Pakete einbinden
% Silbentrennung nach ausgewählter Sprache (s. documentclass)
\usepackage{babel}
% Verwendung der Zeichentabelle T1 (Sonderzeichen etc.)
\usepackage[T1]{fontenc}
% Legt die Zeichenkodierung fest, z.B. UTF8
\usepackage[utf8]{inputenc}
% Schriftarten
\usepackage{aurical}
\usepackage{lmodern}

% Einige LaTeX-Bugfixes
\usepackage{fixltx2e}
% Verbessertes Aussehen von Text
\usepackage{microtype}
% Automatische Anführungszeichen
\usepackage{csquotes}
% Nutzen von "+", "-" etc. in "\setlength", "\setcounter", ...
\usepackage{calc}
% Farben
\usepackage{xcolor}
% "\ifthenelse"-Befehl
\usepackage{xifthen}
% "\forloop"-Befehl
\usepackage{forloop}
% Optionen für eigene definierte Befehle
\usepackage{xparse}
% Befehle mit Optionen der Form "<key>=<value>, ..." definieren
\usepackage{keyval}
% Leichtere TeX-Programmierung mit Zeichenketten
\usepackage{stringstrings}

% Mathepaket (Grenzen über/unter Integralzeichen)
\usepackage[intlimits]{amsmath}
% Symbole, "\mathbb" etc.
\usepackage{amssymb}
% "Schöne" Brüche im Fließtext mit "\sfrac"
\usepackage{xfrac}
% Ermöglicht die Nutzung von "\SI{Zahl}{Einheit}"
\usepackage{siunitx}

% Zum Einbinden von Grafiken ("\includegraphics")
\usepackage{graphicx}
% .tex-Dateien mit "\includegraphics" einbiden
\usepackage{gincltex}
% Abbildungen im Fließtext (\begin{wrapfigure}...)
\usepackage{wrapfig}
% Bilder in der Mitte von zweispaltigem Text
\usepackage[nomicrotype]{pullquote}

% Optionen für Listen
\usepackage{enumitem}
% Drehen von beliebigen Inhalten (\begin{turn}...)
\usepackage{rotating}
% Wird für Kopf- und Fußzeile benötigt
\usepackage{scrpage2}
% Einstellen der Seitenränder
\usepackage{geometry}
% Zeichnen/Diagramme in LaTeX
\usepackage{tikz}
% Text an festen Positionen auf jeder Seite
\usepackage{background}
% Mehrspaltiger Text
\usepackage{multicol}
% Ändern des Aussehens des Inhaltsverzeichnisses
\usepackage{etoc}
% Abstand zwischen Absätzen statt Einrücken; evtl. durch KOMA-Optionen ersetzen? XXX
\usepackage{parskip}

% Verlinkt Textstellen im PDF-Dokument
\usepackage{hyperref}
% Tabelle mit vorgegebener Breite und X-Spalten (passen sich automatisch an)
\usepackage{tabularx}
% Tabellenoptionen (z.B. vertikal zentrierte Paragraphen mit "m")
\usepackage{array}
% "\multirow"-Befehl in Tabellen
\usepackage{multirow}
% gestrichelte Linien (z.B. "\hdashline"); nach tabularx laden?
\usepackage{arydshln}
% "Schlaue" Referenzen; nach "hyperref" laden!
\usepackage{cleveref}


% --- Einstellungen
% -- latex
% Mehr Freiraum in Tabellen
\renewcommand{\arraystretch}{1.2}

% "Einsame" Zeilen (heißen anscheinend "Schusterjungen" bzw. "Hurenkinder") am Seitenanfang/-ende vermeiden (default: 150; max: 10000)
\clubpenalty=3500
\widowpenalty=3500

% PDF-Kompression (0-9)
%\pdfcompresslevel0

% Keine Nummern bei Überschriften oder im Inhaltsverzeichnis
%\setcounter{secnumdepth}{0}
\renewcommand{\thesection}{}

% Überschriften zentrieren
\let\raggedsection\centering

% Weniger Platz vor und nach subsection
\newcommand{\fibelsubsectionpre}{\vspace{-0.5ex minus 1ex}}
\newcommand{\fibelsubsectionpost}{\vspace{-0.5ex minus 1ex}}
% Weniger Platz vor und nach subsubsection
\newcommand{\fibelsubsubsectionpre}{\vspace{-2.5ex minus 0.5ex}}
\newcommand{\fibelsubsubsectionpost}{\vspace{-2.5ex minus 0.5ex}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Mit dem folgenden werden \subsection und \subsubsection so umdefiniert, dass
% immer jeweils direkt davor und direkt danach die Befehle
% "\fibel...pre" und "\fibel...post" eingefügt werden

% subsection
\makeatletter
\let\fibelorigsubsection\subsection
\renewcommand{\subsection}{\@ifstar{\fibelstarsubsection}{\fibelnostarsubsection}}
\makeatother

\newcommand{\fibelnostarsubsection}[2][]
{\fibelsubsectionpre\ifthenelse{\isempty{#1}}{\fibelorigsubsection{#2}}{\fibelorigsubsection[#1]{#2}}\fibelsubsectionpost}
\newcommand{\fibelstarsubsection}[1]
{\fibelsubsectionpre\fibelorigsubsection*{#1}\fibelsubsectionpost}

% subsubsection
\makeatletter
\let\fibelorigsubsubsection\subsubsection
\renewcommand{\subsubsection}{\@ifstar{\fibelstarsubsubsection}{\fibelnostarsubsubsection}}
\makeatother

\newcommand{\fibelnostarsubsubsection}[2][]
{\fibelsubsubsectionpre\ifthenelse{\isempty{#1}}{\fibelorigsubsubsection{#2}}{\fibelorigsubsubsection[#1]{#2}}\fibelsubsubsectionpost}
\newcommand{\fibelstarsubsubsection}[1]
{\fibelsubsubsectionpre\fibelorigsubsubsection*{#1}\fibelsubsubsectionpost}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% -- Worttrennung
\hyphenation{DDSU}
\hyphenation{Home-page}

% -- koma
% Überschriften in Serifen
\addtokomafont{sectioning}{\rmfamily}
% \begin{description}... in Serifen
\addtokomafont{descriptionlabel}{\rmfamily}
% Kopf-/Fußzeile in normaler Schriftart
\setkomafont{pageheadfoot}{\normalfont}
\setkomafont{pagenumber}{\normalfont}

% -- hyperref (Links, Verweise)
\hypersetup{
	% pdfpagelabels und bookmarks sind bereits aktiviert
	%pdfpagelabels,
	%bookmarks,
	bookmarksopen,
	unicode,
	% Links/Verweise mit Kasten der Dicke 0.5pt versehen
	pdfborder={0 0 0.5}
}

% -- geometry (Seitenränder)
\geometry{
	left=1.1cm,
	right=1.1cm,
	top=0.3cm,
	bottom=0.6cm,
	headsep=0.1cm,
	headheight=1.3cm,
	footskip=1cm,
	includeheadfoot
}

% -- csquotes
% Anführungszeichen automatisch umwandeln
\MakeOuterQuote{"}

% -- tikz
% Positionsberechnungen bei TikZ
\usetikzlibrary{calc}

% -- siunitx
\sisetup{
	locale=DE,
	group-digits=true,
	separate-uncertainty,
	output-product=\cdot,
	output-decimal-marker={,},
	input-product=*,
	quotient-mode=fraction,
	per-mode=fraction,
	fraction-function=\sfrac
}
\DeclareSIUnit{\euro}{€}

% -- background
\backgroundsetup{
	color=black,
	opacity=1,
	scale=1,
	contents={}
}

% -- cref
% Verweise auf Fußnoten als hochgestelltes Fußnotensymbol darstellen
\crefformat{footnote}{#2\textsuperscript{#1}#3}

% -- wrapfig
% Abstand am oberen/unteren Rand des Bildes
%\setlength{\intextsep}{0.1cm}

% -- etoc (Inhaltsverzeichnis)
% Definition des Aussehens des Inhaltsverzeichnisses
\etocsettocstyle
% before
{\section*{Inhaltsverzeichnis}
\setlength{\parindent}{0cm}
% Fehlermeldungen im Inhaltsverzeichnis deaktivieren
\hbadness=10000
\vbadness=10000
\hfuzz=1cm
% Wegweise im Inhaltsverzeichnis, wird von Text umflossen
\begin{pullquote}{shape=image, textcoldist=6mm, objvoffset=14, objdist=5mm, image=res/toc_wegweiser.jpg, imageopts={width=11cm}}}
% after
{\end{pullquote}
\clearpage}

% Definition des Aussehens von sections
\etocsetstyle{section}
% start (first section)
{}
% prefix
{\rightskip=0.3cm\parfillskip=-\rightskip}
% content
{\normalsize\etocname~~\dotfill~\makebox[\rightskip][r]{\etocpage}\pullquotenl\par}
% end (last section)
{}
% Definition des Aussehens von subsections: Keine subsections ;-)
\etocsetstyle{subsection}{}{}{}{}
